version: "3.7"
services:
  ganache:
    container_name: etherbridge-ganache
    image: trufflesuite/ganache:latest
    entrypoint: node /app/dist/node/cli.js -b 10 -a 5 --miner.coinbase 0x0E5079117F05C717CF0fEC43ff5C77156395F6E0 -m 'bacon hole season silly brave obscure arena another firm slide debris expand' --networkId 1337 --database.dbPath /ganache_data --fork.network rinkeby --fork.blockNumber 11261043
    ports:
      - "8545:8545"
    volumes:
      - "${PWD}/.cache/cockroach:/ganache_data"

  cockroachdb:
    container_name: etherbridge-cockroachdb
    image: cockroachdb/cockroach:latest
    command: start-single-node --insecure --advertise-addr ${DATABASE_HOST} --listen-addr=${DATABASE_HOST}:${DATABASE_PORT}
    ports:
      - "${DATABASE_PORT}:26257"
      - "8080:8080"
    volumes:
      - "${PWD}/.cache/cockroach:/cockroach/cockroach-data"
    environment:
      - COCKROACH_USER=${DATABASE_USER}
      - COCKROACH_PASSWORD=${DATABASE_PASSWORD}
      - COCKROACH_DATABASE=${DATABASE_NAME}
